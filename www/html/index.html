<html>
    <head>
        <meta charset="utf-8"/>
        <link rel="icon" href="./favicon.ico"/>
        <link rel="stylesheet" href="./index.css"/>
        <script src="imports/wasm_exec.js"></script>
        <script src="./index.js"></script>
    </head>
    <body>
      <div class="page-content-container">
         <div class="header-bar">
            <h1 style="text-align: margin-bottom; float: left; 60pt">
               ACB - A Capital Gains Calculator For Canadians</h1>
            <h2 style="float: right!important">
                <a
                   href="https://github.com/tsiemens/acb/wiki">Documentation</a>
                <a style="margin-left: 5px;"
                   href="https://github.com/tsiemens/acb/wiki/FAQ">FAQ</a>
            </h2>
         </div>
         <div class="page-centered-column">
            <p><span class="tooltip">ACB<span class="tooltiptext">
                  Adjusted Cost Basis - The method in which capital gains tax are calculated in Canada. This can differ from the methods used in other countries.</span>
               </span>
            is a tool for tallying capital gains for Canadian tax returns. Features include:</p>
            <ul>
               <li>Calculating <a href="https://www.canada.ca/en/revenue-agency/services/tax/individuals/topics/about-your-tax-return/tax-return/completing-a-tax-return/personal-income/line-127-capital-gains/capital-losses-deductions/what-a-superficial-loss.html">Superficial Losses</a></li>
               <li>Automatic per-day foreign exchange rate lookups (USD only supported currently)</li>
               <li>Can output to both table and text (good for saving for records)</li>
            </ul>
            <p>ACB is not designed or developed by certified individual, and is to be
            used <strong>at your own risk</strong>. Please cross-check any results if you have any doubts.
            </p>
            <p>ACB is open source, and does not collect any personal data (all processing is done locally to your browser).</p>
            <div id="legacy-options-container">
               <div id="legacy-options-button">&#8964; Legacy Options</div>
               <div id="legacy-options-dropdown" hidden="true">
                  <input type="checkbox" id="no-superficial-losses-checkbox" class="legacy-option-checkbox">
                     Do not calculate superficial losses</input><br>
                  <input type="checkbox" id="sort-buys-before-sells-checkbox" class="legacy-option-checkbox">
                     Sort buys before sells</input>
               </div>
            </div>
         </div> <!-- end page-centered-column -->
         <div class="file-info-container page-centered-column">
            <!-- Based on https://web.dev/read-files/ -->
            <div id="file-drop-area-outer" class="file-drop-area-outer">
               <div id="file-drop-area" class="file-drop-area">
                  <div class="file-drop-area-text">
                     <!-- The `multiple` attribute lets users select multiple files. -->
                     <input type="file" id="file-selector-input" accept=".csv" multiple
                            style="display: none;"/>
                     <label for="file-selector-input">
                        <strong>Choose CSV file(s)</strong>
                        <span>or drag them here.</span>
                     </label>
                     <br><br>
                     <span>Confused? Check out these
                        <a href="https://github.com/tsiemens/acb/wiki/Transaction-Spreadsheets">details on the transactions CSV format</a>,
                        or download a <a href="./sample_txs.csv">sample transactions file</a>.
                     </span>
                     <br><br>
                  </div>
                  <div class="file-list"></div>
                  <div class="run-button-div">
                     <div id="run-button" class="button b-fat b-light">Run</div>
                  </div>
               </div>
            </div>
         </div> <!-- end file-info-container -->
         <h3 style="text-align: center;" class="centered-header tooltip">
            Initial Security Values
            <span class="tooltiptext">
               Add entries here for securities which you already held before any
               transactions in any of the spreadsheets specified.
               BE CAREFUL that transactions producing this initial value do not
               cause superficial losses on your documented transactions.
            </span>
         </h3>
         <div id="initial-symbol-state-inputs">
         </div> <!-- end page-centered-column -->
         <p id="init-secs-errors" class="errors-par page-centered-column"></p>
         <p id="acb-errors" class="errors-par page-centered-column"></p>
         <div id="acb-output-tabs" class="tab-row page-centered-column">
            <div class="tab-label" data-tab-label="table" onclick="showTableOut()">Table</div>
            <span class="tab-separator"></span>
            <div class="tab-label" data-tab-label="text" onclick="showTextOut()">Text</div>
         </div>
         <hr class="page-centered-column">
         <div class="acb-output-container">
            <pre id="acb-text-output" class="acb-output"></pre>
            <div id="acb-table-output" class="acb-output"></div>
         </div>
      </div> <!-- end page-content-container -->
    </body>
    <script>
      const context = initPageJs();
   </script>
</html>
